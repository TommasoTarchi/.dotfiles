#!/bin/bash


# produces a YAML file that can be then be used to rebuild
# the environment using conda


get_env_name() {
  read -p "No conda environment name supplied, please insert one: " ENV_NAME
}


# get name of environment to be exported
if [ -z "$1" ]; then
  get_env_name
else
  ENV_NAME=$1
fi


# export conda environment to YAML
echo "Exporting conda environment and correctly formatting..."
conda env export --name "$ENV_NAME" --no-builds --file temp.yml

# remove prefix line
grep -v "^prefix:" temp.yml > environment.yml
rm temp.yml

echo "YAML file has been generated successfully."
